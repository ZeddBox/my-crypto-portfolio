<header class="mb-4">
  <nav class="flex flex-wrap items-center justify-between px-3 py-3 text-gray-700 bg-gray-100 dark:bg-gray-700 dark:text-gray-100 lg:px-10 transition duration-500">
    <div class="flex items-center mr-6 flex-no-shrink">
      <%= link_to "ZedFolio", presentation_path, class:"link text-xl tracking-tight font-black" %>
    </div>
    <div class="block lg:hidden">
      <button class="inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-white hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-white transition ease-in duration-300" aria-expanded="false"  id="button">
        <svg class="w-3 h-3 fill-current" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><title>Menu</title><path d="M0 3h20v2H0V3zm0 6h20v2H0V9zm0 6h20v2H0v-2z"/></svg>
      </button>
    </div>
    <div class="items-center block w-full text-center lg:flex-1 lg:flex lg:text-left hidden transition ease-in duration-700" id="navbar">
      <div class="lg:flex-grow">
        <%= link_to "Home", root_path, class: "block mt-4 lg:inline-block lg:mt-0 lg:mr-4 mb-2 lg:mb-0 link" %>
        <%= link_to "Market", currencies_path, class: "block mt-4 lg:inline-block lg:mt-0 lg:mr-4 mb-2 lg:mb-0 link" %>
      <% if user_signed_in? %>
        <%= link_to "Purchases (#{current_user.portfolio.purchases.count})", purchases_path, class: "block mt-4 lg:inline-block lg:mt-0 lg:mr-4 mb-2 lg:mb-0 link" %>
      <% end %>
      </div>

      <div class="flex flex-wrap space-x-4 w-full mt-2 items-center lg:flex lg:flex-row lg:flex-1 lg:mt-0 lg:text-left lg:justify-end">
        <p class="text-sm inline-flex mx-3">Last update : <br><%= Currency.last.updated_at.ago_in_words%></p>
        <%= button_to crypto_update_path, method: :post, class: "btn btn-default bg-green-600 hover:bg-green-500 text-white mb-2 lg:mr-2 lg:mb-0 flex-1 items-center text-sm truncate border-opacity-0" do %>
          <i class="fa fa-refresh mr-2"></i><span> Update Prices</span>
        <% end %>
        <% if user_signed_in? %>
          <%= button_to edit_user_registration_path, class: "btn btn-default bg-blue-600 hover:bg-blue-500 text-white mb-2 lg:mr-2 lg:mb-0 flex-1 items-center text-sm truncate border-opacity-0" do %>
            <i class="fa fa-user mr-2"></i><span> Edit Account</span>
          <% end %>
          <%= button_to destroy_user_session_path, method: :delete, class: "btn btn-default bg-red-600 hover:bg-red-500 text-white mb-2 lg:mr-2 lg:mb-0 flex-1 items-center text-sm truncate border-opacity-0" do %>
            <i class="fa fa-times-circle mr-2"></i><span> Log Out</span>
          <% end %>
        <% else %>
          <%= button_to new_user_session_path, class: "btn btn-default bg-blue-500 hover:bg-blue-600 text-white mb-2 lg:mr-2 lg:mb-0 flex-1 items-center text-sm truncate" do %>
            <i class="fa fa-user mr-2"></i><span> Login</span>
          <% end %>
          <%= button_to new_user_registration_path, class: "btn btn-default bg-blue-500 hover:bg-blue-600 text-white mb-2 lg:mr-2 lg:mb-0 flex-1 items-center text-sm truncate" do %>
            <i class="fa fa-edit mr-2"></i><span> Sign Up</span>
          <% end %>
        <% end %>
        <a class="btn btn-default border-none bg-transparent outline-none text-white mb-2 lg:mr-2 lg:mb-0 block inline-flex items-center text-sm truncate" id="theme-toggler">ðŸŒš<a>
      </div>
    </div>

    <!-- Navbar for mobile -->

    <div id="navbarr" class="hidden sm:hidden">
      <div class="px-2 pt-2 pb-3 space-y-1">
        <a href="#" class="bg-gray-900 text-white block px-3 py-2 rounded-md text-base font-medium">Dashboard</a>
        <a href="#" class="text-gray-300 hover:bg-gray-700 hover:text-white block px-3 py-2 rounded-md text-base font-medium">Team</a>
        <a href="#" class="text-gray-300 hover:bg-gray-700 hover:text-white block px-3 py-2 rounded-md text-base font-medium">Projects</a>
        <a href="#" class="text-gray-300 hover:bg-gray-700 hover:text-white block px-3 py-2 rounded-md text-base font-medium">Calendar</a>
      </div>
    </div>
  </nav>
</header>

<script>

  // Navbar Toggler
      var button = document.getElementById('button'); // Assumes element with id='button'

  button.onclick = function() {
      var element = document.getElementById('navbar');  // Assumes element has id of #navbar
      element.classList.toggle('hidden');
  }

  // Dark/Light Theme Toggler
  var themeToggler = document.querySelector('#theme-toggler');
  var currentTheme = localStorage.getItem('theme');
  var pageTheme = document.querySelector('.html');

  var isDark = true;

  if (currentTheme == 'dark') {
    pageTheme.classList.add('dark');
    themeToggler.innerText = 'ðŸŒž';
  } else {
    themeToggler.innerText = 'ðŸŒš';
  }

  function themeMode() {
    isDark = !isDark;
    // if (isDark == true) {
    //   themeToggler.innerText = 'ðŸŒž'
    // } else {
    //   themeToggler.innerText = 'ðŸŒš'
    // }
    // isDark ? (themeToggler.innerText = 'ðŸŒž') : (themeToggler.innerText = 'ðŸŒš');
    pageTheme.classList.toggle('dark');

    let theme = 'light';
    themeToggler.innerText = 'ðŸŒš'
    if (pageTheme.classList.contains('dark')) {
      theme = 'dark';
      themeToggler.innerText = 'ðŸŒž'
    }
    localStorage.setItem('theme', theme);
  }

  themeToggler.addEventListener('click', themeMode);
  </script>
